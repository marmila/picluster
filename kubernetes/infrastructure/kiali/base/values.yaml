# kiali helm values (base)

cr:
  create: true
  namespace: istio-system
  spec:
    auth:
      strategy: "anonymous"
    prometheus:
      # Prometheus service
      url: "http://kube-prometheus-stack-prometheus.monitoring:9090/"
    grafana:
      enabled: true
      # Grafana service name is "grafana" and is in the "telemetry" namespace.
      in_cluster_url: 'http://grafana.monitoring/'

    deployment:
      ingress:
        class_name: "nginx"
        enabled: true
        override_yaml:
          metadata:
            annotations:
              # Enable cert-manager to create automatically the SSL certificate and store in Secret
              # Possible Cluster-Issuer values:
              #   * 'letsencrypt-issuer' (valid TLS certificate using IONOS API)
              #   * 'ca-issuer' (CA-signed certificate, not valid)
              cert-manager.io/cluster-issuer: letsencrypt-issuer
              cert-manager.io/common-name: kiali.picluster.ricsanfre.com
          spec:
            rules:
            - host: kiali.picluster.ricsanfre.com
              http:
                paths:
                - backend:
                    service:
                      name: kiali
                      port:
                        number: 80
                  path: /
                  pathType: Prefix
            tls:
            - hosts:
              - kiali.picluster.ricsanfre.com
              secretName: kiali-tls
