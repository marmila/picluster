apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ../../base

helmCharts:
  - name: base
    repo: https://istio-release.storage.googleapis.com/charts
    version: 1.22.2
    releaseName: "istio-base"
    namespace: istio-system
    includeCRDs: true
    valuesFile: ../../base/istio-base-values.yaml
    additionalValuesFiles:
      - istio-base-values.yaml
  - name: cni
    repo: https://istio-release.storage.googleapis.com/charts
    version: 1.22.2
    releaseName: "istio-cni"
    namespace: istio-system
    valuesInline:
      profile: ambient
    valuesFile: ../../base/istio-cni-values.yaml
    additionalValuesFiles:
      - istio-cni-values.yaml
  - name: istiod
    repo: https://istio-release.storage.googleapis.com/charts
    version: 1.22.2
    releaseName: "istiod"
    namespace: istio-system
    valuesInline:
      profile: ambient
    valuesFile: ../../base/istiod-values.yaml
    additionalValuesFiles:
      - istiod-values.yaml
  - name: ztunnel
    repo: https://istio-release.storage.googleapis.com/charts
    version: 1.22.2
    releaseName: "ztunnle"
    namespace: istio-system
    valuesInline:
      profile: ambient
    valuesFile: ../../base/ztunnel-values.yaml
    additionalValuesFiles:
      - ztunnel-values.yaml